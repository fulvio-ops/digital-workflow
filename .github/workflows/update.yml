name: Aggiorna contenuti
on:
  schedule:
    - cron: "0 6 * * *"   # ogni giorno alle 06:00 UTC (07:00 italiane)
  workflow_dispatch:
permissions:
  contents: write

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - run: pip install feedparser beautifulsoup4
      - name: Update articoli
        run: python scripts/update.py
      - name: Update IA
        run: python scripts/update_ia.py
      - name: Commit & push JSON
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "chore: aggiorna articoli e ia"
          file_pattern: "data/articoli.json data/ia.json"
